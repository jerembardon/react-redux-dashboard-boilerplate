{"ast":null,"code":"import { SET_AUTHENTIFICATION, ADD_RESSOURCE, GET_SPECIAL_RESOURCE, PARSE_ERROR, RESET_ERROR } from \"./action-types\";\nimport axios from \"axios\";\nvar BASE_URL = \"http://localhost:3090\";\nexport function setAuthentification(isLoggedIn) {\n  return {\n    type: SET_AUTHENTIFICATION,\n    payload: isLoggedIn\n  };\n}\nexport function signinUser(_ref, history) {\n  var email = _ref.email,\n      password = _ref.password;\n  return function (dispatch) {\n    axios.post(\"\".concat(BASE_URL, \"/signin\"), {\n      email: email,\n      password: password\n    }).then(function (response) {\n      localStorage.setItem(\"Token\", response.data.token);\n      dispatch(setAuthentification(true));\n      history.push(\"/dashboard\");\n    }).catch(function (error) {\n      dispatch(parseError(\"Impossible de trouver l'utilisateur\"));\n    });\n  };\n}\nexport function signupUser(_ref2, history) {\n  var email = _ref2.email,\n      password = _ref2.password;\n  return function (dispatch) {\n    axios.post(\"\".concat(BASE_URL, \"/signup\"), {\n      email: email,\n      password: password\n    }).then(function (response) {\n      localStorage.setItem(\"Token\", response.data.token);\n      dispatch(setAuthentification(true));\n      history.push(\"/lol\");\n    }).catch(function (error) {\n      console.log(error);\n    });\n  };\n}\nexport function signoutUser() {\n  return function (dispatch) {\n    dispatch(setAuthentification(false));\n    localStorage.removeItem(\"Token\");\n  };\n}\nexport function parseError(errorMessage) {\n  return {\n    type: PARSE_ERROR,\n    payload: errorMessage\n  };\n}\nexport function resetError() {\n  return {\n    type: RESET_ERROR\n  };\n} // SELECTORS EXEMPLE SEE RESSOURCE PAGE\n// export function getSpecialRessource() {\n//   return function(dispatch) {\n//     axios\n//       .get(`${BASE_URL}/lol`, {\n//         headers: { authorization: localStorage.getItem(\"Token\") }\n//       })\n//       .then(response => {\n//         dispatch({\n//           type: GET_SPECIAL_RESOURCE,\n//           payload: response.data.result\n//         });\n//       })\n//       .catch(error => {\n//         console.log(error);\n//       });\n//   };\n// }\n// export function addRessource() {\n//   return {\n//     type: ADD_RESSOURCE\n//   };\n// }","map":{"version":3,"sources":["/Users/j.bardon/Desktop/Test/reactapp/client/src/store/actions/index.js"],"names":["SET_AUTHENTIFICATION","ADD_RESSOURCE","GET_SPECIAL_RESOURCE","PARSE_ERROR","RESET_ERROR","axios","BASE_URL","setAuthentification","isLoggedIn","type","payload","signinUser","history","email","password","dispatch","post","then","response","localStorage","setItem","data","token","push","catch","error","parseError","signupUser","console","log","signoutUser","removeItem","errorMessage","resetError"],"mappings":"AAAA,SACEA,oBADF,EAEEC,aAFF,EAGEC,oBAHF,EAIEC,WAJF,EAKEC,WALF,QAMO,gBANP;AAOA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,IAAMC,QAAQ,GAAG,uBAAjB;AACA,OAAO,SAASC,mBAAT,CAA6BC,UAA7B,EAAyC;AAC9C,SAAO;AACLC,IAAAA,IAAI,EAAET,oBADD;AAELU,IAAAA,OAAO,EAAEF;AAFJ,GAAP;AAID;AAED,OAAO,SAASG,UAAT,OAAyCC,OAAzC,EAAkD;AAAA,MAA5BC,KAA4B,QAA5BA,KAA4B;AAAA,MAArBC,QAAqB,QAArBA,QAAqB;AACvD,SAAO,UAASC,QAAT,EAAmB;AACxBV,IAAAA,KAAK,CACFW,IADH,WACWV,QADX,cAC8B;AAC1BO,MAAAA,KAAK,EAALA,KAD0B;AAE1BC,MAAAA,QAAQ,EAARA;AAF0B,KAD9B,EAKGG,IALH,CAKQ,UAAAC,QAAQ,EAAI;AAChBC,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BF,QAAQ,CAACG,IAAT,CAAcC,KAA5C;AACAP,MAAAA,QAAQ,CAACR,mBAAmB,CAAC,IAAD,CAApB,CAAR;AACAK,MAAAA,OAAO,CAACW,IAAR,CAAa,YAAb;AACD,KATH,EAUGC,KAVH,CAUS,UAAAC,KAAK,EAAI;AACdV,MAAAA,QAAQ,CAACW,UAAU,CAAC,qCAAD,CAAX,CAAR;AACD,KAZH;AAaD,GAdD;AAeD;AAED,OAAO,SAASC,UAAT,QAAyCf,OAAzC,EAAkD;AAAA,MAA5BC,KAA4B,SAA5BA,KAA4B;AAAA,MAArBC,QAAqB,SAArBA,QAAqB;AACvD,SAAO,UAASC,QAAT,EAAmB;AACxBV,IAAAA,KAAK,CACFW,IADH,WACWV,QADX,cAC8B;AAC1BO,MAAAA,KAAK,EAALA,KAD0B;AAE1BC,MAAAA,QAAQ,EAARA;AAF0B,KAD9B,EAKGG,IALH,CAKQ,UAAAC,QAAQ,EAAI;AAChBC,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BF,QAAQ,CAACG,IAAT,CAAcC,KAA5C;AACAP,MAAAA,QAAQ,CAACR,mBAAmB,CAAC,IAAD,CAApB,CAAR;AACAK,MAAAA,OAAO,CAACW,IAAR,CAAa,MAAb;AACD,KATH,EAUGC,KAVH,CAUS,UAAAC,KAAK,EAAI;AACdG,MAAAA,OAAO,CAACC,GAAR,CAAYJ,KAAZ;AACD,KAZH;AAaD,GAdD;AAeD;AAED,OAAO,SAASK,WAAT,GAAuB;AAC5B,SAAO,UAASf,QAAT,EAAmB;AACxBA,IAAAA,QAAQ,CAACR,mBAAmB,CAAC,KAAD,CAApB,CAAR;AACAY,IAAAA,YAAY,CAACY,UAAb,CAAwB,OAAxB;AACD,GAHD;AAID;AAED,OAAO,SAASL,UAAT,CAAoBM,YAApB,EAAkC;AACvC,SAAO;AACLvB,IAAAA,IAAI,EAAEN,WADD;AAELO,IAAAA,OAAO,EAAEsB;AAFJ,GAAP;AAID;AAED,OAAO,SAASC,UAAT,GAAsB;AAC3B,SAAO;AACLxB,IAAAA,IAAI,EAAEL;AADD,GAAP;AAGD,C,CAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA","sourcesContent":["import {\n  SET_AUTHENTIFICATION,\n  ADD_RESSOURCE,\n  GET_SPECIAL_RESOURCE,\n  PARSE_ERROR,\n  RESET_ERROR\n} from \"./action-types\";\nimport axios from \"axios\";\n\nconst BASE_URL = \"http://localhost:3090\";\nexport function setAuthentification(isLoggedIn) {\n  return {\n    type: SET_AUTHENTIFICATION,\n    payload: isLoggedIn\n  };\n}\n\nexport function signinUser({ email, password }, history) {\n  return function(dispatch) {\n    axios\n      .post(`${BASE_URL}/signin`, {\n        email,\n        password\n      })\n      .then(response => {\n        localStorage.setItem(\"Token\", response.data.token);\n        dispatch(setAuthentification(true));\n        history.push(\"/dashboard\");\n      })\n      .catch(error => {\n        dispatch(parseError(\"Impossible de trouver l'utilisateur\"));\n      });\n  };\n}\n\nexport function signupUser({ email, password }, history) {\n  return function(dispatch) {\n    axios\n      .post(`${BASE_URL}/signup`, {\n        email,\n        password\n      })\n      .then(response => {\n        localStorage.setItem(\"Token\", response.data.token);\n        dispatch(setAuthentification(true));\n        history.push(\"/lol\");\n      })\n      .catch(error => {\n        console.log(error);\n      });\n  };\n}\n\nexport function signoutUser() {\n  return function(dispatch) {\n    dispatch(setAuthentification(false));\n    localStorage.removeItem(\"Token\");\n  };\n}\n\nexport function parseError(errorMessage) {\n  return {\n    type: PARSE_ERROR,\n    payload: errorMessage\n  };\n}\n\nexport function resetError() {\n  return {\n    type: RESET_ERROR\n  };\n}\n\n// SELECTORS EXEMPLE SEE RESSOURCE PAGE\n// export function getSpecialRessource() {\n//   return function(dispatch) {\n//     axios\n//       .get(`${BASE_URL}/lol`, {\n//         headers: { authorization: localStorage.getItem(\"Token\") }\n//       })\n//       .then(response => {\n//         dispatch({\n//           type: GET_SPECIAL_RESOURCE,\n//           payload: response.data.result\n//         });\n//       })\n//       .catch(error => {\n//         console.log(error);\n//       });\n//   };\n// }\n\n// export function addRessource() {\n//   return {\n//     type: ADD_RESSOURCE\n//   };\n// }\n"]},"metadata":{},"sourceType":"module"}